# ğŸ—ï¸ Architecture Documentation

Complete technical architecture of the Internal Tool Dashboard.

---

## ğŸ“Š System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER BROWSER                             â”‚
â”‚                     (Chrome, Firefox, etc.)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ HTTPS
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NEXT.JS FRONTEND                              â”‚
â”‚                   (Port 3000 - Vercel)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  App Router (Next.js 14)                               â”‚    â”‚
â”‚  â”‚  - /login (public)                                     â”‚    â”‚
â”‚  â”‚  - /dashboard/* (protected)                            â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  Components:                                           â”‚    â”‚
â”‚  â”‚  - Sidebar, Navbar, Tables, Forms                      â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  State Management:                                     â”‚    â”‚
â”‚  â”‚  - React Hooks (useState, useEffect)                   â”‚    â”‚
â”‚  â”‚  - localStorage (JWT token, user data)                 â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  Styling: Tailwind CSS                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                             â”‚                                    â”‚
â”‚                             â”‚ REST API Calls                     â”‚
â”‚                             â”‚ (Axios + JWT Token)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HTTP/JSON
                              â”‚ Authorization: JWT <token>
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PAYLOAD CMS BACKEND                             â”‚
â”‚                  (Port 4000 - Railway)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Express.js Server                                     â”‚    â”‚
â”‚  â”‚  - CORS enabled for frontend                           â”‚    â”‚
â”‚  â”‚  - JWT authentication middleware                       â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  Payload CMS:                                          â”‚    â”‚
â”‚  â”‚  - Admin Panel (/admin)                                â”‚    â”‚
â”‚  â”‚  - REST API (/api)                                     â”‚    â”‚
â”‚  â”‚  - Access Control (role-based)                         â”‚    â”‚
â”‚  â”‚  - Hooks (beforeChange, afterRead)                     â”‚    â”‚
â”‚  â”‚                                                         â”‚    â”‚
â”‚  â”‚  Collections:                                          â”‚    â”‚
â”‚  â”‚  - Users (auth)                                        â”‚    â”‚
â”‚  â”‚  - Employees                                           â”‚    â”‚
â”‚  â”‚  - Projects                                            â”‚    â”‚
â”‚  â”‚  - Tasks                                               â”‚    â”‚
â”‚  â”‚  - LeaveRequests                                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                             â”‚                                    â”‚
â”‚                             â”‚ Mongoose ODM                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MONGODB DATABASE                             â”‚
â”‚                   (MongoDB Atlas / Local)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Collections:                                          â”‚    â”‚
â”‚  â”‚  - users                                               â”‚    â”‚
â”‚  â”‚  - employees                                           â”‚    â”‚
â”‚  â”‚  - projects                                            â”‚    â”‚
â”‚  â”‚  - tasks                                               â”‚    â”‚
â”‚  â”‚  - leave-requests                                      â”‚    â”‚
â”‚  â”‚  - payload-preferences                                 â”‚    â”‚
â”‚  â”‚  - payload-migrations                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User    â”‚                                                    â”‚ Backend  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                                                               â”‚
     â”‚  1. Enter email & password                                   â”‚
     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚
     â”‚                                                               â”‚
     â”‚                                      2. Validate credentials  â”‚
     â”‚                                         Check in DB           â”‚
     â”‚                                               â”‚               â”‚
     â”‚                                               â–¼               â”‚
     â”‚                                      3. Generate JWT token    â”‚
     â”‚                                                               â”‚
     â”‚  4. Return { user, token, exp }                              â”‚
     â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
     â”‚                                                               â”‚
     â”‚  5. Store token in localStorage                              â”‚
     â”‚     Store user in localStorage                               â”‚
     â”‚                                                               â”‚
     â”‚  6. Redirect to /dashboard                                   â”‚
     â”‚                                                               â”‚
     â”‚  7. All API calls include token                              â”‚
     â”‚     Authorization: JWT <token>                               â”‚
     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚
     â”‚                                                               â”‚
     â”‚                                      8. Validate token        â”‚
     â”‚                                         Decode user info      â”‚
     â”‚                                         Apply access control  â”‚
     â”‚                                                               â”‚
     â”‚  9. Return filtered data                                     â”‚
     â”‚ <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
     â”‚                                                               â”‚
```

---

## ğŸ”’ Access Control Architecture

### Three-Layer Security Model

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LAYER 1: FRONTEND                         â”‚
â”‚                  (UI Visibility Control)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  - Hide/show menu items based on role             â”‚     â”‚
â”‚  â”‚  - Disable buttons for unauthorized actions       â”‚     â”‚
â”‚  â”‚  - Conditional rendering of components            â”‚     â”‚
â”‚  â”‚                                                    â”‚     â”‚
â”‚  â”‚  âš ï¸ NOT FOR SECURITY - UX ONLY                    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  LAYER 2: API ROUTES                         â”‚
â”‚              (Request Authentication)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  - Validate JWT token                             â”‚     â”‚
â”‚  â”‚  - Decode user information                        â”‚     â”‚
â”‚  â”‚  - Attach user to request object                  â”‚     â”‚
â”‚  â”‚                                                    â”‚     â”‚
â”‚  â”‚  âœ… SECURITY CHECKPOINT                           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LAYER 3: COLLECTION ACCESS                      â”‚
â”‚            (Granular Permission Control)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Access Control Functions:                        â”‚     â”‚
â”‚  â”‚                                                    â”‚     â”‚
â”‚  â”‚  read: ({ req: { user } }) => {                   â”‚     â”‚
â”‚  â”‚    if (user.role === 'admin') return true         â”‚     â”‚
â”‚  â”‚    if (user.role === 'employee') {                â”‚     â”‚
â”‚  â”‚      return { assignedTo: { equals: user.id } }   â”‚     â”‚
â”‚  â”‚    }                                               â”‚     â”‚
â”‚  â”‚  }                                                 â”‚     â”‚
â”‚  â”‚                                                    â”‚     â”‚
â”‚  â”‚  âœ… MAIN SECURITY LAYER                           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Access Control Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Collection   â”‚  Admin  â”‚ Manager  â”‚ Employee  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Users        â”‚         â”‚          â”‚           â”‚
â”‚  - Read      â”‚   All   â”‚   All    â”‚   Self    â”‚
â”‚  - Create    â”‚   âœ“     â”‚   âœ—      â”‚   âœ—       â”‚
â”‚  - Update    â”‚   All   â”‚   Self   â”‚   Self    â”‚
â”‚  - Delete    â”‚   âœ“     â”‚   âœ—      â”‚   âœ—       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Employees    â”‚         â”‚          â”‚           â”‚
â”‚  - Read      â”‚   All   â”‚   All    â”‚   Self    â”‚
â”‚  - Create    â”‚   âœ“     â”‚   âœ—      â”‚   âœ—       â”‚
â”‚  - Update    â”‚   All   â”‚ Limited  â”‚   âœ—       â”‚
â”‚  - Delete    â”‚   âœ“     â”‚   âœ—      â”‚   âœ—       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Projects     â”‚         â”‚          â”‚           â”‚
â”‚  - Read      â”‚   All   â”‚   All    â”‚ Assigned  â”‚
â”‚  - Create    â”‚   âœ“     â”‚   âœ“      â”‚   âœ—       â”‚
â”‚  - Update    â”‚   All   â”‚   Own    â”‚   âœ—       â”‚
â”‚  - Delete    â”‚   âœ“     â”‚   âœ—      â”‚   âœ—       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Tasks        â”‚         â”‚          â”‚           â”‚
â”‚  - Read      â”‚   All   â”‚   All    â”‚ Assigned  â”‚
â”‚  - Create    â”‚   âœ“     â”‚   âœ“      â”‚   âœ—       â”‚
â”‚  - Update    â”‚   All   â”‚   All    â”‚  Status   â”‚
â”‚  - Delete    â”‚   âœ“     â”‚   âœ“      â”‚   âœ—       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ LeaveReq     â”‚         â”‚          â”‚           â”‚
â”‚  - Read      â”‚   All   â”‚   All    â”‚   Own     â”‚
â”‚  - Create    â”‚   âœ“     â”‚   âœ“      â”‚   âœ“       â”‚
â”‚  - Update    â”‚   All   â”‚ Approve  â”‚ Pending   â”‚
â”‚  - Delete    â”‚   âœ“     â”‚   âœ—      â”‚   âœ—       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Data Model & Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Users       â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ email           â”‚          â”‚
â”‚ password        â”‚          â”‚
â”‚ name            â”‚          â”‚
â”‚ role            â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
        â–²                    â”‚
        â”‚                    â”‚
        â”‚ 1:1                â”‚ Many:1
        â”‚                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   Employees     â”‚          â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚          â”‚
â”‚ id              â”‚          â”‚
â”‚ user            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ department      â”‚
â”‚ designation     â”‚
â”‚ status          â”‚
â”‚ joinDate        â”‚
â”‚ salary          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Projects     â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ id              â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ name            â”‚          â”‚
â”‚ description     â”‚          â”‚
â”‚ manager         â”‚â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ startDate       â”‚      â”‚   â”‚
â”‚ endDate         â”‚      â”‚   â”‚ Many:1
â”‚ status          â”‚      â”‚   â”‚
â”‚ budget          â”‚      â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚
                         â”‚   â”‚
                    Many:1   â”‚
                         â”‚   â”‚
                         â–¼   â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     Users       â”‚
                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                    â”‚ id              â”‚
                    â”‚ email           â”‚
                    â”‚ name            â”‚
                    â”‚ role            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–²
                              â”‚
                              â”‚ Many:1
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚     Tasks       â”‚           â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚
â”‚ id              â”‚           â”‚
â”‚ title           â”‚           â”‚
â”‚ description     â”‚           â”‚
â”‚ project         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ assignedTo      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ priority        â”‚           â”‚
â”‚ status          â”‚           â”‚
â”‚ dueDate         â”‚           â”‚
â”‚ estimatedHours  â”‚           â”‚
â”‚ actualHours     â”‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                              â”‚
                         Many:1
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     Users       â”‚
                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                    â”‚ id              â”‚
                    â”‚ email           â”‚
                    â”‚ name            â”‚
                    â”‚ role            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–²
                              â”‚
                              â”‚ Many:1
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚ LeaveRequests   â”‚           â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚
â”‚ id              â”‚           â”‚
â”‚ employee        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ leaveType       â”‚
â”‚ startDate       â”‚
â”‚ endDate         â”‚
â”‚ reason          â”‚
â”‚ status          â”‚
â”‚ approvedBy      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ approvalDate    â”‚           â”‚
â”‚ rejectionReason â”‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                              â”‚
                         Many:1
                              â”‚
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     Users       â”‚
                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                    â”‚ id              â”‚
                    â”‚ email           â”‚
                    â”‚ name            â”‚
                    â”‚ role            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ API Request Flow

### Example: Fetching Tasks as Employee

```
1. User clicks "Tasks" in sidebar
   â”‚
   â–¼
2. Frontend: Navigate to /dashboard/tasks
   â”‚
   â–¼
3. Frontend: useEffect triggers API call
   â”‚
   â”‚  const response = await apiClient.get('/tasks')
   â”‚
   â–¼
4. Axios Interceptor: Add JWT token to headers
   â”‚
   â”‚  Authorization: JWT eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
   â”‚
   â–¼
5. Backend: Receive request at /api/tasks
   â”‚
   â–¼
6. Payload: Validate JWT token
   â”‚
   â”‚  - Decode token
   â”‚  - Extract user info (id, role)
   â”‚  - Attach to req.user
   â”‚
   â–¼
7. Payload: Apply access control
   â”‚
   â”‚  read: ({ req: { user } }) => {
   â”‚    if (user.role === 'employee') {
   â”‚      return { assignedTo: { equals: user.id } }
   â”‚    }
   â”‚  }
   â”‚
   â–¼
8. MongoDB: Query with filter
   â”‚
   â”‚  db.tasks.find({ assignedTo: ObjectId("...") })
   â”‚
   â–¼
9. Payload: Return filtered results
   â”‚
   â”‚  {
   â”‚    docs: [...],
   â”‚    totalDocs: 5,
   â”‚    page: 1,
   â”‚    ...
   â”‚  }
   â”‚
   â–¼
10. Frontend: Receive data and render
    â”‚
    â”‚  setTasks(response.data.docs)
    â”‚
    â–¼
11. UI: Display tasks in table
```

---

## ğŸ› ï¸ Technology Stack Details

### Frontend Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Next.js 14 (App Router)         â”‚
â”‚  - Server Components                    â”‚
â”‚  - Client Components                    â”‚
â”‚  - File-based routing                   â”‚
â”‚  - Built-in optimization                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”œâ”€â”€â”€ React 18
                  â”‚     - Hooks (useState, useEffect, etc.)
                  â”‚     - Context API (optional)
                  â”‚
                  â”œâ”€â”€â”€ TypeScript
                  â”‚     - Type safety
                  â”‚     - IntelliSense
                  â”‚
                  â”œâ”€â”€â”€ Tailwind CSS
                  â”‚     - Utility-first styling
                  â”‚     - Responsive design
                  â”‚
                  â”œâ”€â”€â”€ Axios
                  â”‚     - HTTP client
                  â”‚     - Interceptors
                  â”‚
                  â”œâ”€â”€â”€ React Hook Form
                  â”‚     - Form management
                  â”‚     - Validation
                  â”‚
                  â”œâ”€â”€â”€ Zod
                  â”‚     - Schema validation
                  â”‚     - Type inference
                  â”‚
                  â””â”€â”€â”€ Lucide React
                        - Icon library
```

### Backend Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Payload CMS 2.x               â”‚
â”‚  - Headless CMS                         â”‚
â”‚  - Admin panel                          â”‚
â”‚  - Access control                       â”‚
â”‚  - Hooks system                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”œâ”€â”€â”€ Express.js
                  â”‚     - Web server
                  â”‚     - Middleware
                  â”‚     - Routing
                  â”‚
                  â”œâ”€â”€â”€ MongoDB
                  â”‚     - NoSQL database
                  â”‚     - Document storage
                  â”‚
                  â”œâ”€â”€â”€ Mongoose
                  â”‚     - ODM (Object Data Modeling)
                  â”‚     - Schema validation
                  â”‚
                  â”œâ”€â”€â”€ TypeScript
                  â”‚     - Type safety
                  â”‚     - Auto-completion
                  â”‚
                  â””â”€â”€â”€ JWT
                        - Token-based auth
                        - Stateless sessions
```

---

## ğŸš€ Deployment Architecture

### Production Setup

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CLOUDFLARE CDN                        â”‚
â”‚                  (Optional - Caching)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   VERCEL (Frontend)                      â”‚
â”‚  - Next.js deployment                                   â”‚
â”‚  - Automatic HTTPS                                      â”‚
â”‚  - Global CDN                                           â”‚
â”‚  - Environment variables                                â”‚
â”‚                                                         â”‚
â”‚  URL: https://your-app.vercel.app                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ HTTPS/REST API
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  RAILWAY (Backend)                       â”‚
â”‚  - Payload CMS deployment                               â”‚
â”‚  - Automatic HTTPS                                      â”‚
â”‚  - Environment variables                                â”‚
â”‚  - Health checks                                        â”‚
â”‚                                                         â”‚
â”‚  URL: https://your-api.railway.app                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ MongoDB Protocol
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               MONGODB ATLAS (Database)                   â”‚
â”‚  - Managed MongoDB                                      â”‚
â”‚  - Automatic backups                                    â”‚
â”‚  - Monitoring                                           â”‚
â”‚  - Scaling                                              â”‚
â”‚                                                         â”‚
â”‚  Connection: mongodb+srv://...                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Performance Considerations

### Frontend Optimization
- âœ… Server-side rendering (SSR) for initial load
- âœ… Code splitting by route
- âœ… Image optimization with next/image
- âœ… Lazy loading for heavy components
- âœ… Caching with SWR or React Query

### Backend Optimization
- âœ… Database indexing on frequently queried fields
- âœ… Pagination for large datasets
- âœ… Depth control for relationship queries
- âœ… Compression middleware
- âœ… Rate limiting for API endpoints

### Database Optimization
- âœ… Indexes on: email, role, status, assignedTo
- âœ… Compound indexes for complex queries
- âœ… Connection pooling
- âœ… Query optimization

---

## ğŸ” Security Measures

### Authentication Security
- âœ… JWT tokens with expiration
- âœ… Password hashing (bcrypt)
- âœ… Secure token storage
- âœ… HTTPS only in production
- âœ… CORS configuration

### Authorization Security
- âœ… Role-based access control
- âœ… Backend permission enforcement
- âœ… Field-level access control
- âœ… Query-level filtering
- âœ… Input validation

### Data Security
- âœ… SQL injection prevention (MongoDB)
- âœ… XSS protection
- âœ… CSRF protection
- âœ… Rate limiting
- âœ… Environment variable protection

---

**This architecture provides a solid foundation for a scalable, secure, and maintainable enterprise application.**
